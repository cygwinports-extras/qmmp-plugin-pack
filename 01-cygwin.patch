--- origsrc/qmmp-plugin-pack-0.6.1/src/Input/ffap/CMakeLists.txt	2012-07-19 10:57:20.000000000 -0500
+++ src/qmmp-plugin-pack-0.6.1/src/Input/ffap/CMakeLists.txt	2012-08-07 23:31:17.042545700 -0500
@@ -63,7 +63,11 @@ IF(USE_ASM)
     SET(libffap_SRCS ${libffap_SRCS} dsputil_yasm.asm x86inc.asm)
     IF(CMAKE_SYSTEM_PROCESSOR MATCHES "^(i.86)$")
       ADD_DEFINITIONS(-DARCH_X86_32)
-      set_source_files_properties(x86inc.asm dsputil_yasm.asm PROPERTIES COMPILE_FLAGS "-m x86 -DARCH_X86_32")
+      IF(WIN32 OR CYGWIN)
+        set_source_files_properties(x86inc.asm dsputil_yasm.asm PROPERTIES COMPILE_FLAGS "-m x86 -DARCH_X86_32 -DPREFIX")
+      ELSE(WIN32 OR CYGWIN)
+        set_source_files_properties(x86inc.asm dsputil_yasm.asm PROPERTIES COMPILE_FLAGS "-m x86 -DARCH_X86_32")
+      ENDIF(WIN32 OR CYGWIN)
       message("-- Architecture: x86")
     ELSEIF(CMAKE_SYSTEM_PROCESSOR STREQUAL "x86_64")
       ADD_DEFINITIONS(-DARCH_X86_64)
--- origsrc/qmmp-plugin-pack-0.6.1/src/Input/ffap/ffap.c	2012-03-01 12:48:17.000000000 -0600
+++ src/qmmp-plugin-pack-0.6.1/src/Input/ffap/ffap.c	2012-08-07 23:21:29.532641200 -0500
@@ -593,12 +593,14 @@ ape_read_header (FFap_decoder *decoder)
 
 #define AV_WL32(p, v) AV_WB32(p, bswap_32(v))
 
+#ifndef __CYGWIN__
 static inline uint32_t bswap_32(uint32_t x)
 {
     x= ((x<<8)&0xFF00FF00) | ((x>>8)&0x00FF00FF);
     x= (x>>16) | (x<<16);
     return x;
 }
+#endif
 
 static int ape_read_packet(FFap_decoder *decoder)
 {
